{"ast":null,"code":"import _regeneratorRuntime from \"E:/Hasna Technology/Samples/ST_Playbook_ht/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"E:/Hasna Technology/Samples/ST_Playbook_ht/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\nvar axios = require(\"axios\"); // let host = \"http://authendicate.hasnatech.com/\";\n\n\nvar host = \"http://authenticate.hasnatech.com/\"; // let host = \"http://localhost/security/\";\n\nvar portal = host + \"auth/login?returnurl=\";\nvar key_rul = host + \"auth/key/\"; // module.exports = security;\n// module.exports = {\n\nexport function security(obj) {\n  var output = \"\";\n\n  if (obj.mode != \"development\") {\n    console.log(obj);\n  } else {\n    var url_string = window.location.href;\n    var url = new URL(url_string);\n    var host = url.host;\n    var path = url.pathname.split(\"/\")[1]; // host = \"project.cglcloud.com\";\n\n    if (host.toString().includes(\"cglcloud.com\") == true) {\n      return;\n    } // console.log(host.toString(), host.toString().includes(\"cglcloud.com\"));\n\n\n    if (path == \"\") {\n      path = \"local_\";\n    } else {\n      path = path + \"_\";\n    }\n\n    console.log(path, \"version\", \"0.0.9\");\n    var key = url.searchParams.get(\"key\");\n\n    if (key) {\n      setCookie(path, key, 30);\n      sendJson(key);\n    } else {\n      key = getCookie(path);\n\n      if (key) {\n        sendJson(key);\n      } else {\n        // console.log(portal + url_string);\n        window.open(portal + url_string, \"_self\");\n      }\n    }\n  }\n\n  return true;\n}\n\nfunction setCookie(cname, cvalue, exdays) {\n  var d = new Date();\n  d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000);\n  var expires = \"expires=\" + d.toUTCString();\n  document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\n}\n\nfunction getCookie(cname) {\n  var name = cname + \"=\";\n  var decodedCookie = decodeURIComponent(document.cookie);\n  var ca = decodedCookie.split(\";\");\n\n  for (var i = 0; i < ca.length; i++) {\n    var c = ca[i];\n\n    while (c.charAt(0) == \" \") {\n      c = c.substring(1);\n    }\n\n    if (c.indexOf(name) == 0) {\n      return c.substring(name.length, c.length);\n    }\n  }\n\n  return \"\";\n}\n\nfunction sendJson(_x) {\n  return _sendJson.apply(this, arguments);\n}\n\nfunction _sendJson() {\n  _sendJson = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(key) {\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            axios.get(key_rul + key).then(function (response) {\n              // handle success\n              // console.log(response.data);\n              if (response.data == false) {\n                var url_string = window.location.href;\n                var url = new URL(url_string); // console.log(portal + url_string);\n\n                window.open(portal + url_string, \"_self\");\n              }\n            }).catch(function (error) {\n              console.log(error);\n            }).then(function () {// always executed\n            });\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _sendJson.apply(this, arguments);\n}","map":null,"metadata":{},"sourceType":"module"}